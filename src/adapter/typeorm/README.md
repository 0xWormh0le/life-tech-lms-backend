# TypeORM Configuration

Reference : https://typeorm.io/

## Create new table definition

- To create new blank entity, run command

```
npx typeorm entity:create src/adapter/typeorm/entity/ENTITY_NAME
```

- To generate migration from entity definitions
  - Add your newly created entity into `TypeormEntities` from `src/adapter/typeorm/data-source.ts` file
  - run command for generate migration
    ```
    ROOT_FOLDER_PATH=. npm run typeorm:generate:migration src/adapter/typeorm/migration/MIGRATION_NAME
    ```
    - No need to add extension in `MIGRATION_NAME`
    - The Migration files must be .js because the typescript code generated by Typeorm can't be transpiled due to its bug

## Create new migration

- To generate new migration empty default migration file
  ```
  npm run typeorm:create:migration src/adapter/typeorm/migration/Update-Table-Schema
  ```

## Run migration from `codex_usa_backend`

- Run command for run migration
  ```
    npx typeorm migration:run -d src/adapter/typeorm/dist/dev-data-source.js
  ```

## Revert migration from `codex_usa_backend`

- Run command for Revert migration
  ```
    npx typeorm migration:revert -d src/adapter/typeorm/dist/dev-data-source.js
  ```
